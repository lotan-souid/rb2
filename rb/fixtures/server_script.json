[
 {
  "allow_guest": 0,
  "api_method": null,
  "cron_format": null,
  "disabled": 0,
  "docstatus": 0,
  "doctype": "Server Script",
  "doctype_event": "After Save",
  "enable_rate_limit": 0,
  "event_frequency": "All",
  "modified": "2025-07-30 09:33:20.235761",
  "module": "Development",
  "name": "Assign lot",
  "rate_limit_count": 5,
  "rate_limit_seconds": 86400,
  "reference_doctype": "Arrangement File",
  "script": "if doc.assigned_lot:\r\n    frappe.db.set_value(\"Lot\", doc.assigned_lot, \"assigned_arrangement_file\", doc.name)\r\n",
  "script_type": "DocType Event"
 },
 {
  "allow_guest": 0,
  "api_method": null,
  "cron_format": null,
  "disabled": 0,
  "docstatus": 0,
  "doctype": "Server Script",
  "doctype_event": "Before Save",
  "enable_rate_limit": 0,
  "event_frequency": "All",
  "modified": "2025-07-25 14:36:30.859419",
  "module": "Development",
  "name": "Update Current Status from Latest Committee Decision",
  "rate_limit_count": 5,
  "rate_limit_seconds": 86400,
  "reference_doctype": "Project Approval Committee",
  "script": "# Update Current Status from Latest Committee Decision\n\nif doc.meeting_history:\n    latest_meeting = sorted(doc.meeting_history, key=lambda m: m.meeting_date or frappe.utils.nowdate())[-1]\n    doc.current_status = latest_meeting.decision\nelse:\n    doc.current_status = None\n",
  "script_type": "DocType Event"
 },
 {
  "allow_guest": 0,
  "api_method": null,
  "cron_format": null,
  "disabled": 0,
  "docstatus": 0,
  "doctype": "Server Script",
  "doctype_event": "Before Save",
  "enable_rate_limit": 0,
  "event_frequency": "All",
  "modified": "2025-07-29 10:54:40.017343",
  "module": "Arrangement",
  "name": "Set Evacuee full name",
  "rate_limit_count": 5,
  "rate_limit_seconds": 86400,
  "reference_doctype": "Evacuee",
  "script": "if doc.first_name and doc.last_name:\r\n    doc.full_name = f\"{doc.first_name} {doc.last_name}\"\r\nelse:\r\n    doc.full_name = (doc.first_name or '') + (doc.last_name or '')\r\n",
  "script_type": "DocType Event"
 },
 {
  "allow_guest": 0,
  "api_method": null,
  "cron_format": null,
  "disabled": 0,
  "docstatus": 0,
  "doctype": "Server Script",
  "doctype_event": "Before Save",
  "enable_rate_limit": 0,
  "event_frequency": "All",
  "modified": "2025-07-29 11:10:06.187112",
  "module": "Arrangement",
  "name": "Validate Arrangement File Fields",
  "rate_limit_count": 5,
  "rate_limit_seconds": 86400,
  "reference_doctype": "Arrangement File",
  "script": "if doc.evacuee_a and doc.evacuee_b and doc.evacuee_a == doc.evacuee_b:\r\n    frappe.throw(\"Evacuee A and Evacuee B cannot be the same person.\")\r\n",
  "script_type": "DocType Event"
 },
 {
  "allow_guest": 0,
  "api_method": null,
  "cron_format": null,
  "disabled": 0,
  "docstatus": 0,
  "doctype": "Server Script",
  "doctype_event": "Before Save",
  "enable_rate_limit": 0,
  "event_frequency": "All",
  "modified": "2025-07-29 14:54:10.716382",
  "module": "rb",
  "name": "Validate Evacuee",
  "rate_limit_count": 5,
  "rate_limit_seconds": 86400,
  "reference_doctype": "Evacuee",
  "script": "# שלבים:\r\n# - הסרת תווים שאינם ספרות\r\n# - בדיקה אם יש 10 ספרות\r\n# - עיצוב לפורמט xxx-xxx-xxxx\r\n\r\nif not doc.phone:\r\n    frappe.throw(\"יש להזין מספר טלפון\")\r\n\r\n# הסר תווים לא מספריים (רק ספרות נשארות)\r\ndigits = ''.join([c for c in doc.phone if c.isdigit()])\r\n\r\nif len(digits) != 10:\r\n    frappe.throw(\"מספר הטלפון חייב להכיל 10 ספרות בדיוק\")\r\n\r\n# הפורמט הסופי: xxx-xxx-xxxx\r\ndoc.phone = f\"{digits[:3]}-{digits[3:6]}-{digits[6:]}\"\r\n",
  "script_type": "DocType Event"
 }
]